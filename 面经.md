# [Javascript查漏补缺](#Javascript)

## 一、隐式转换规则

- ### 数字转换：

  #### String   :    等价于使用Number（）函数进行转换的结果,<font color="red">非数字字符串 = Na N</font>；空字符串 = 0；’  正负Infinity ‘   =    数字类型Infinity  ；<font color='red'>'  {}  '   =   NaN</font>   ;     <font color='red'>‘[]’ = 0</font>  ;

  #### undefined :  Na N

  #### null : 0

  ####  Boolean : true 转换为 1，false 转换为 0。 

- ### 布尔值转换：

  #### 除null、undefined、‘’、""、Na N、+0、-0外都为true

- ### 字符串转换：正常思路

## 二、JavaScript垃圾回收机制

- [什么是垃圾回收机制？](#什么是垃圾回收机制？)

- [为什么要进行垃圾回收?](#为什么要进行垃圾回收?)

- [垃圾回收是怎样进行的？](# 垃圾回收是怎样进行的？)

  

  ### 什么是垃圾回收机制？

  内存泄露：指已经动态分配的堆内存，没有得到及时释放，造成的内存浪费

  ​		常见内存泄露： 使用不当的闭包将会在IE(IE 9之前)中造成内存泄漏 ；未及时清理的定时器、回调函数等

  什么是垃圾回收机制？

  ​		垃圾回收机制又称作G C（Garbage Collection）:工作在J S引擎内部，原理是找到内存空间中的程序用不到的内存空间或者是之前用过了后面不会在用的内存空间并回收

  ### 为什么要进行垃圾回收?

  程序运行需要内存，只要程序提出要求，操作系统必须满足；

  对于持续运行占用内存的程序，必须要及时释放，否则占用内存越来越大，轻则影响性能，重则程序崩溃。

### 		垃圾回收是怎样进行的？

- ​	标记清除算法（最常用）

  ​	**标记阶段**：为所有活动对象做上标记

  ​	**清除阶段**：把没有标记的非活动对象销毁

- ​    引用清除算法

## 三、展开运算符对对象的使用

```javascript
let obj = {name:'ybj',age:18};

/*展开运算符不能展开对象*/
console.log(...obj);//obj is not iterable

/*可以复制对象*/
let newObj = {...obj};
console.log(newObj);//{name:'ybj',age:18}

/*复制对象，并对对象已有的属性更改，或者添加属性*/
let newObj1 = {...obj,name:'uahs'}
console.log(newObj1);//{name:'uahs',age:18}
```

## 四、for	in和Object.keys()的区别

​	forin遍历对象属性，会获取对象的自有属性和原型对象上的属性

​	Object.keys()遍历对象属性，只能获取对象的自有属性

​	都不能获取以symbol为键的属性

## 五、图片预加载

```html
<img id ='imgObj' src='https://a.axihe.com/assets/img/anbang-weixin.jpg'/>

<script>
    let imgObj = document.getElementById('imgObj');
    function yujiazai(tempSrc){
        let imgObj1 = new Image();//创建img标签
       	imgObj1.src = tempSrc;
        imgObj1.onload = function(){
            imgObj.src = this.src;
          	imgObj.height = 50;
        	imgObj.width = 50;
        }
    }
</script>
```

## 六、Promise

**promise串联多个任务：解决回调地狱问题**

回调地狱：一个函数的结果作为下一个回调函数的执行条件，层层嵌套形成回调地狱

promise：一个函数的结果决定promise的状态，promise的状态决定回调函数的执行条件

**promise异常穿透：**

穿透过程中相当于`reason => {throw reason}`

**如何中断Promise链：**

传递给下一个回调函数一个pending状态的promise，即`return new Promise(()=>{})`。下一个回调函数，根据上一个回调函数的返回结果来决定，如果返回pending状态的promise，则会终止在这个回调函数。

# HTML拾遗

## HTML5新特性

- ### 新增语义化标签：header、footer、nav、section、aside、hgroup

  ​	优点：便于阅读，利于开发和维护；利于搜索引擎优化（SEO）；方便其他设备解析

- ### 废除元素

  ​	1.纯表现形式的标签，这些标签可以用css来代替

  ​	2.frame框架相关标签，对页面存在负面作用

  ​	3.只有部分浏览器支持的元素

  

- ### 新增API

  1. Canvas画布
  2.  音视频标签
  3. WebsocketAPI
  4. 增强型表单
  5. drag拖拽
  6. Web Storage API
  7. Web Workers  API

## DOM

- ### 事件捕获与事件冒泡

  ​	1.事件捕获： addEventListener 第三个参数为true

  ​		指事件从根元素向下传播到实际触发节点，依次检查经过节点是否绑定事件监		听函数，如果有且设定为捕获阶段则执行		

  ​	2.事件冒泡：addEventListener 第三个参数为false

  ​		指事件从实际触发节点向上传播到根节点，依次检查经过节点是否绑定事件监		听函数，如果有且设定为冒泡阶段则触发

- ### 事件委托

  ​	<font color="pink">利用事件冒泡的原理</font>，给父元素绑定事件监听函数，则可以管理所属下一类子事件

  **缺点：**部分事件没有冒泡机制（blur、focus）

  ​			频繁触发的事件不适合使用

- ## defer和async的区别

  ​	defer：在document解析完成之后，执行JS脚本

  ​	async：在document解析过程时，JS脚本一旦加载好就立即执行，仍然会阻塞文document解析

## 标签拾遗

### 表单元素

#### 	input表单元素

- 配合<label for="input的id">标签使用，绑定指定input标签，点击lebal就会触发input标签
- <input alt="图像输出的替代文本" value="表单元素值" type="">

#### 	form表单域

​	用于提交表单元素到后台服务器

- 属性

	action：定义表单提交时的动作

	method：规定表单提交使用的HTTP方法（GET/POST），默认为GET

	name：input必须设置name属性，才能被form正确提交

	target：规定action属性中地址的目标

# CSS拾遗

### 外边距（Margin）合并-嵌套块元素塌陷

​	对于两个嵌套关系的块元素，同时在垂直方向存在外边距时，父级块元素会塌陷两个块元素的margin中较大的值

### 元素隐藏与显示

- display:隐藏元素，不保留位置
- visibility:隐藏元素，保留位置
- overflow：隐藏溢出元素

# Broswer浏览器

## 一、OSI七层模型/TCP四层模型

- ### OSI七层模型

  物理层：

  数据链路层：

  网络层：

  运输层：

  会话层：

  表示层：

  应用层：

- ### TCP四层模型

  网络接口层：

  网际层：

  运输层：

  应用层：

## 二、HTTP与HTTPS

### HTTP

-  HTTP 是超文本传输协议，它定义了客户端和服务器之间交换报文的格式和方式，默认使用 80 端口。 

- 特点：无状态、明文、不安全

- HTTP1.1支持长连接，管道网络传输减少响应时间，但要造成队头阻塞能够使用同一个域名建立多个持久连接（chrome是六个）解决

- 优化：利用缓存技术尽量避免http请求；

  ​		   利用代理服务器减少重定向次数，使用打包工具减少请求次数，

  ​		   数据压缩

### HTTPS

-  HTTPS 指的是超文本传输安全协议，HTTPS 是基于 HTTP 协议的，不过它会使用 TLS/SSL 来对数据加密。
-  透明性：混合加密；完整性：摘要算法；真实性：数字证书；
- 密钥交换算法：RSA（安全性较差，不支持前向加密）、ECDHE（更好）

### 区别

- HTTPS在HTTP和TCP之间加入SSL/TLS安全协议，加密传输数据
- HTTPS需要经历TCP握手和SSL/TLS握手才能进行加密传输
- HTTP服务器监听80端口；HTTPS服务器监听443端口
- 使用HTTPS的服务器需要向CA申请数字证书

## 三、WebSocket

- #### 是什么？

  HTML5开始提供的一种浏览器与服务器进行<font color="pink">全双工通信的通信协议</font>，复用HTTP握手信道（通过HTTP请求报文升级通信服务协议）

- #### 优点？

  可以发送⽂本，也可以⼆进制⽂件 

  相比于http1.0的短连接和1.1的长连接，<font color="pink">实时性更强</font>

  相比于http每次都要携带完整的请求头，<font color="pink">控制开销更少</font>

  无跨域问题

  支持扩展

- #### 应用场景

  弹幕、聊天室

  ```javascript
  const ws = new Websocket();
  ```

  